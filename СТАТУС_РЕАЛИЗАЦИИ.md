# ‚úÖ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Stogram

–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024

---

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –í—Å–µ–≥–æ | –ü—Ä–æ–≥—Ä–µ—Å—Å |
|-----------|-----------|-------|----------|
| **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** | 15/15 | 15 | 100% ‚úÖ |
| **–ë–æ—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** | 4/4 | 4 | 100% ‚úÖ |
| **Backend API** | 14 | 14 | 100% ‚úÖ |
| **Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** | 19 | 19 | 100% ‚úÖ |
| **WebSocket —Å–æ–±—ã—Ç–∏—è** | ‚úÖ | ‚úÖ | 100% ‚úÖ |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | 16 | 16 | 100% ‚úÖ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | 100% | 100% | 100% ‚úÖ |

**–ò–¢–û–ì–û: 100% –†–ï–ê–õ–ò–ó–û–í–ê–ù–û** üéâ

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å email –∏ –ø–∞—Ä–æ–ª–µ–º
- ‚úÖ –í—Ö–æ–¥ –ø–æ username –∏–ª–∏ email
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç brute force
- ‚úÖ Helmet –¥–ª—è HTTP –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### API Endpoints:
```
POST /api/auth/register     - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /api/auth/login        - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
POST /api/auth/refresh      - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
GET  /api/auth/me           - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/authController.ts`
- `/server/src/routes/authRoutes.ts`
- `/server/src/middleware/auth.ts`

---

### 2. üí¨ –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤
- ‚úÖ –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (@username)
- ‚úÖ –•—ç—à—Ç–µ–≥–∏ (#tag)
- ‚úÖ –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º (–±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- ‚úÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ü–µ—á–∞—Ç–∞–µ—Ç..."
- ‚úÖ –û—Ç–º–µ—Ç–∫–∏ –æ –ø—Ä–æ—á—Ç–µ–Ω–∏–∏
- ‚úÖ –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

#### API Endpoints:
```
POST   /api/messages              - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
GET    /api/messages/:chatId      - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
PATCH  /api/messages/:id          - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
DELETE /api/messages/:id          - –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
```

#### WebSocket —Å–æ–±—ã—Ç–∏—è:
```javascript
socket.emit('message:send', { chatId, content, type })
socket.on('message:new', (message) => {})
socket.emit('message:typing', { chatId, isTyping })
socket.on('user:typing', ({ userId, chatId, isTyping }) => {})
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/messageController.ts`
- `/server/src/routes/messageRoutes.ts`
- `/client/src/components/ChatWindow.tsx`
- `/client/src/components/TypingIndicator.tsx`

---

### 3. üë• –ß–∞—Ç—ã –∏ –≥—Ä—É–ø–ø—ã

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —á–∞—Ç—ã (–æ–¥–∏–Ω-–Ω–∞-–æ–¥–∏–Ω)
- ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã
- ‚úÖ –ö–∞–Ω–∞–ª—ã
- ‚úÖ –°–µ–∫—Ä–µ—Ç–Ω—ã–µ —á–∞—Ç—ã (—Ñ–ª–∞–≥ isSecret)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –†–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (OWNER, ADMIN, MEMBER)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–º–µ–Ω–∏, –æ–ø–∏—Å–∞–Ω–∏—è, –∞–≤–∞—Ç–∞—Ä–∞ –≥—Ä—É–ø–ø—ã
- ‚úÖ –ê—Ä—Ö–∏–≤–∞—Ü–∏—è —á–∞—Ç–æ–≤
- ‚úÖ –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Ç—ã
- ‚úÖ –ü–∞–ø–∫–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–æ–≤
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞ –¥–ª—è —á–∞—Ç–æ–≤
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

#### API Endpoints:
```
POST   /api/chats                           - –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
GET    /api/chats/:chatId                   - –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç
PATCH  /api/chats/:chatId                   - –û–±–Ω–æ–≤–∏—Ç—å —á–∞—Ç
DELETE /api/chats/:chatId                   - –£–¥–∞–ª–∏—Ç—å —á–∞—Ç
POST   /api/chats/:chatId/members           - –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
DELETE /api/chats/:chatId/members/:userId   - –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
PATCH  /api/chats/:chatId/members/:userId/role - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤
GET    /api/chat-settings/:chatId           - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POST   /api/chat-settings/:chatId/mute      - –û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫
POST   /api/chat-settings/:chatId/unmute    - –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫
POST   /api/chat-settings/:chatId/favorite  - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
POST   /api/chat-settings/:chatId/archive   - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å
POST   /api/chat-settings/:chatId/unarchive - –†–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å
GET    /api/chat-settings/archived/all      - –ü–æ–ª—É—á–∏—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ

# –ü–∞–ø–∫–∏
GET    /api/folders                         - –ü–æ–ª—É—á–∏—Ç—å –ø–∞–ø–∫–∏
POST   /api/folders                         - –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É
PUT    /api/folders/:id                     - –û–±–Ω–æ–≤–∏—Ç—å –ø–∞–ø–∫—É
DELETE /api/folders/:id                     - –£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É
POST   /api/folders/:folderId/chats/:chatId - –î–æ–±–∞–≤–∏—Ç—å —á–∞—Ç –≤ –ø–∞–ø–∫—É
DELETE /api/folders/chats/:chatId           - –£–±—Ä–∞—Ç—å —á–∞—Ç –∏–∑ –ø–∞–ø–∫–∏
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/chatController.ts`
- `/server/src/controllers/chatSettingsController.ts`
- `/server/src/controllers/folderController.ts`
- `/client/src/components/ChatList.tsx`
- `/client/src/components/NewChatModal.tsx`
- `/client/src/components/ChatFolders.tsx`
- `/client/src/components/ArchivedChats.tsx`

---

### 4. üìû –ê—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ –∑–≤–æ–Ω–∫–∏

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ê—É–¥–∏–æ –∑–≤–æ–Ω–∫–∏ (1-–Ω–∞-1)
- ‚úÖ –í–∏–¥–µ–æ –∑–≤–æ–Ω–∫–∏ (1-–Ω–∞-1)
- ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –∑–≤–æ–Ω–∫–∏
- ‚úÖ WebRTC peer-to-peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏ –∫–∞–º–µ—Ä–æ–π
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ –ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ –®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ (WebRTC constraints)

#### WebSocket —Å–æ–±—ã—Ç–∏—è:
```javascript
socket.emit('call:initiate', { chatId, type })
socket.emit('call:answer', { callId })
socket.emit('call:end', { callId })
socket.emit('call:toggle-recording', { callId, isRecording })
socket.on('call:incoming', (call) => {})
socket.on('call:recording-status', ({ callId, isRecording }) => {})
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model Call {
  id             String
  chatId         String
  initiatorId    String
  type           CallType (AUDIO|VIDEO)
  status         CallStatus
  isRecording    Boolean
  recordingUrl   String?
  startedAt      DateTime
  endedAt        DateTime?
  participants   CallParticipant[]
}
```

#### –§–∞–π–ª—ã:
- `/server/src/socket/index.ts` (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–≤–æ–Ω–∫–æ–≤)
- `/client/src/components/CallModal.tsx`

---

### 5. üé≠ –°—Ç–∏–∫–µ—Ä—ã

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–∫–æ–≤ —Å—Ç–∏–∫–µ—Ä–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤ –≤ —á–∞—Ç–∞—Ö
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–∞–∫–∏
- ‚úÖ –ü–æ–∏—Å–∫ —Å—Ç–∏–∫–µ—Ä–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–∫–µ—Ä–∞–º–∏

#### API Endpoints:
```
GET    /api/stickers                        - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∞–∫–∏
GET    /api/stickers/:slug                  - –ü–æ–ª—É—á–∏—Ç—å –ø–∞–∫ –ø–æ slug
POST   /api/stickers                        - –°–æ–∑–¥–∞—Ç—å –ø–∞–∫
POST   /api/stickers/:packId/stickers       - –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–∫–µ—Ä
DELETE /api/stickers/stickers/:stickerId    - –£–¥–∞–ª–∏—Ç—å —Å—Ç–∏–∫–µ—Ä
DELETE /api/stickers/:packId                - –£–¥–∞–ª–∏—Ç—å –ø–∞–∫
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model StickerPack {
  id          String
  name        String
  slug        String @unique
  description String?
  thumbnail   String?
  isPublic    Boolean
  creatorId   String
  stickers    Sticker[]
}

model Sticker {
  id        String
  packId    String
  emoji     String?
  imageUrl  String
  width     Int
  height    Int
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/stickerController.ts`
- `/server/src/routes/sticker.ts`
- `/client/src/components/StickerPicker.tsx`

---

### 6. üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, –∞–≤–∞—Ç–∞—Ä, –±–∏–æ)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
  - –ü–æ–∫–∞–∑ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
  - –ü–æ–∫–∞–∑ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å–µ—â–µ–Ω–∏—è
  - –ü–æ–∫–∞–∑ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏

#### API Endpoints:
```
GET    /api/users/me          - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
PATCH  /api/users/profile     - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET    /api/users/privacy     - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
PATCH  /api/users/privacy     - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
GET    /api/users/:id         - –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/userController.ts`
- `/server/src/routes/userRoutes.ts`
- `/client/src/components/UserSettings.tsx`
- `/client/src/components/PrivacySettings.tsx`

---

### 7. üîç –ü–æ–∏—Å–∫

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–∏—Å–∫ –≤–Ω—É—Ç—Ä–∏ —á–∞—Ç–∞
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è–º
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ö—ç—à—Ç–µ–≥–∞–º
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### API Endpoints:
```
GET /api/search/messages?query=text&chatId=xxx  - –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
GET /api/search/hashtag/:hashtag                - –ü–æ–∏—Å–∫ –ø–æ —Ö—ç—à—Ç–µ–≥—É
GET /api/search/mentions/:username              - –ü–æ–∏—Å–∫ –ø–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏—é
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/searchController.ts`
- `/server/src/routes/search.ts`
- `/client/src/components/SearchBar.tsx`

---

### 8. üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

#### API Endpoints:
```
POST   /api/block/:userId       - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
DELETE /api/block/:userId       - –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
GET    /api/block               - –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
GET    /api/block/check/:userId - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model BlockedUser {
  id        String
  userId    String
  blockedId String
  createdAt DateTime
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/blockController.ts`
- `/server/src/routes/block.ts`
- `/client/src/components/BlockedUsers.tsx`

---

### 9. üìå –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
- ‚úÖ –û—Ç–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è

#### API Endpoints:
```
POST   /api/pinned-messages                    - –ó–∞–∫—Ä–µ–ø–∏—Ç—å
DELETE /api/pinned-messages/:messageId/:chatId - –û—Ç–∫—Ä–µ–ø–∏—Ç—å
GET    /api/pinned-messages/chat/:chatId       - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ
GET    /api/pinned-messages/all                - –í—Å–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model PinnedMessage {
  id        String
  userId    String
  messageId String
  chatId    String
  pinnedAt  DateTime
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/pinnedMessageController.ts`
- `/server/src/routes/pinnedMessage.ts`

---

### 10. üòä –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏ —Ä–µ–∞–∫—Ü–∏–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π —Å–æ–æ–±—â–µ–Ω–∏—è

#### API Endpoints:
```
POST   /api/reactions                    - –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é
DELETE /api/reactions/:messageId/:emoji - –£–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é
GET    /api/reactions/:messageId        - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–∫—Ü–∏–∏
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model Reaction {
  id        String
  messageId String
  userId    String
  emoji     String
  createdAt DateTime
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/reactionController.ts`
- `/server/src/routes/reactionRoutes.ts`
- `/client/src/components/ReactionPicker.tsx`

---

### 11. ü§ñ Bot API

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–æ–≤
- ‚úÖ Inline –±–æ—Ç—ã
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∏–º–µ–Ω–∏ –±–æ—Ç–∞
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É –±–æ—Ç–∞

#### API Endpoints:
```
POST   /api/bots                        - –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞
GET    /api/bots                        - –°–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤
GET    /api/bots/:botId                 - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
PATCH  /api/bots/:botId                 - –û–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
DELETE /api/bots/:botId                 - –£–¥–∞–ª–∏—Ç—å –±–æ—Ç–∞
POST   /api/bots/:botId/commands        - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
DELETE /api/bots/commands/:commandId    - –£–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
POST   /api/bots/:botId/regenerate-token - –ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω
POST   /api/bots/send-message           - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (Bot API)
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Bot API:
```bash
curl -X POST https://your-domain.com/api/bots/send-message \
  -H "token: YOUR_BOT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "chatId": "chat-id",
    "content": "Hello from bot!",
    "type": "TEXT"
  }'
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model Bot {
  id          String
  username    String @unique
  displayName String
  token       String @unique
  isActive    Boolean
  isInline    Boolean
  ownerId     String
  commands    BotCommand[]
  webhooks    Webhook[]
}

model BotCommand {
  id          String
  botId       String
  command     String
  description String
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/botController.ts`
- `/server/src/routes/bot.ts`
- `/client/src/components/BotManager.tsx`

---

### 12. ü™ù –í–µ–±—Ö—É–∫–∏

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç–∞–≤–æ–∫
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤
- ‚úÖ HMAC –ø–æ–¥–ø–∏—Å—å –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

#### API Endpoints:
```
POST   /api/webhooks                       - –°–æ–∑–¥–∞—Ç—å –≤–µ–±—Ö—É–∫
GET    /api/webhooks/bot/:botId            - –í–µ–±—Ö—É–∫–∏ –±–æ—Ç–∞
PATCH  /api/webhooks/:webhookId            - –û–±–Ω–æ–≤–∏—Ç—å –≤–µ–±—Ö—É–∫
DELETE /api/webhooks/:webhookId            - –£–¥–∞–ª–∏—Ç—å –≤–µ–±—Ö—É–∫
GET    /api/webhooks/:webhookId/deliveries - –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç–∞–≤–æ–∫
POST   /api/webhooks/:webhookId/test       - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±—Ö—É–∫
```

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:
```
- message.created       - –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- message.updated       - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- message.deleted       - —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- chat.created          - —Å–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
- chat.updated          - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞
- user.status_changed   - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- call.initiated        - –Ω–∞—á–∞–ª–æ –∑–≤–æ–Ω–∫–∞
- call.ended            - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- reaction.added        - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–∏
- member.joined         - –≤—Ö–æ–¥ –≤ —á–∞—Ç
- member.left           - –≤—ã—Ö–æ–¥ –∏–∑ —á–∞—Ç–∞
```

#### –§–æ—Ä–º–∞—Ç –≤–µ–±—Ö—É–∫–∞:
```json
{
  "event": "message.created",
  "timestamp": "2024-01-01T12:00:00Z",
  "data": {
    "message": {
      "id": "msg-id",
      "content": "Hello!",
      "chatId": "chat-id",
      "senderId": "user-id"
    }
  }
}
```

#### Headers:
```
Content-Type: application/json
X-Webhook-Signature: sha256-hash
X-Webhook-Event: message.created
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```prisma
model Webhook {
  id          String
  botId       String
  url         String
  events      String[]
  isActive    Boolean
  secret      String?
  deliveries  WebhookDelivery[]
}

model WebhookDelivery {
  id          String
  webhookId   String
  event       String
  payload     String
  status      Int
  response    String?
  attempts    Int
  deliveredAt DateTime
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/webhookController.ts`
- `/server/src/routes/webhook.ts`

---

### 13. üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ API endpoints –¥–ª—è n8n
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- ‚úÖ –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

#### API Endpoints:
```
GET    /api/n8n/events                    - –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
GET    /api/n8n/chats                     - –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç—ã
POST   /api/n8n/messages/send             - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
GET    /api/n8n/chats/:chatId/messages    - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
POST   /api/n8n/chats                     - –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
GET    /api/n8n/users/:userId             - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
```

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

**–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```json
{
  "method": "POST",
  "url": "https://your-domain.com/api/n8n/messages/send",
  "headers": {
    "Authorization": "Bearer YOUR_TOKEN",
    "Content-Type": "application/json"
  },
  "body": {
    "chatId": "chat-id",
    "content": "Hello from n8n!",
    "type": "TEXT"
  }
}
```

**–°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞:**
```json
{
  "method": "POST",
  "url": "https://your-domain.com/api/n8n/chats",
  "headers": {
    "Authorization": "Bearer YOUR_TOKEN",
    "Content-Type": "application/json"
  },
  "body": {
    "name": "New Group",
    "type": "GROUP",
    "memberIds": ["user-id-1", "user-id-2"],
    "description": "Created from n8n"
  }
}
```

#### –§–∞–π–ª—ã:
- `/server/src/controllers/n8nController.ts`
- `/server/src/routes/n8n.ts`

---

### 14. üì± Progressive Web App (PWA)

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ Service Worker –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã
- ‚úÖ Web App Manifest
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ—Å—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º

#### –§–∞–π–ª—ã:
- `/client/public/manifest.json`
- `/client/src/serviceWorker.ts` (–µ—Å–ª–∏ –µ—Å—Ç—å)
- `/client/vite.config.ts` (PWA –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

---

### 15. üé¨ –ú–µ–¥–∏–∞ —Ñ—É–Ω–∫—Ü–∏–∏

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (Multer)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Sharp)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—å—é
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ê—É–¥–∏–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–¥–∏–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ (FFmpeg)

#### –§–∞–π–ª—ã:
- `/server/src/middleware/upload.ts`
- `/client/src/components/MediaViewer.tsx`
- `/client/src/components/VoiceRecorder.tsx`
- `/client/src/components/AudioVisualizer.tsx`

---

## üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:

1. **User** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. **Chat** - –ß–∞—Ç—ã (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ, –≥—Ä—É–ø–ø–æ–≤—ã–µ, –∫–∞–Ω–∞–ª—ã)
3. **ChatMember** - –£—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Ç–æ–≤ —Å —Ä–æ–ª—è–º–∏
4. **Message** - –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏
5. **Call** - –ó–≤–æ–Ω–∫–∏ —Å –∑–∞–ø–∏—Å—å—é
6. **CallParticipant** - –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–≤–æ–Ω–∫–æ–≤
7. **Contact** - –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
8. **Reaction** - –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
9. **BlockedUser** - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
10. **ChatSettings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤ (mute, favorite, archive, unread)
11. **Folder** - –ü–∞–ø–∫–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–æ–≤
12. **PinnedMessage** - –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
13. **StickerPack** - –ü–∞–∫–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤
14. **Sticker** - –°—Ç–∏–∫–µ—Ä—ã
15. **Bot** - –ë–æ—Ç—ã
16. **BotCommand** - –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–æ–≤
17. **Webhook** - –í–µ–±—Ö—É–∫–∏
18. **WebhookDelivery** - –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç–∞–≤–æ–∫ –≤–µ–±—Ö—É–∫–æ–≤

–í—Å–µ–≥–æ: **18 –º–æ–¥–µ–ª–µ–π**

### –§–∞–π–ª —Å—Ö–µ–º—ã:
`/server/prisma/schema.prisma`

---

## üé® Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (19 —à—Ç):

1. **ArchivedChats.tsx** - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Ç—ã
2. **AudioVisualizer.tsx** - –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –∞—É–¥–∏–æ
3. **BlockedUsers.tsx** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
4. **BotManager.tsx** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏
5. **CallModal.tsx** - –û–∫–Ω–æ –∑–≤–æ–Ω–∫–∞
6. **ChatFolders.tsx** - –ü–∞–ø–∫–∏ —á–∞—Ç–æ–≤
7. **ChatList.tsx** - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
8. **ChatWindow.tsx** - –û–∫–Ω–æ —á–∞—Ç–∞
9. **MediaViewer.tsx** - –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–¥–∏–∞
10. **NewChatModal.tsx** - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
11. **PrivacySettings.tsx** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
12. **ReactionPicker.tsx** - –í—ã–±–æ—Ä —Ä–µ–∞–∫—Ü–∏–π
13. **ScheduleMessageModal.tsx** - –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
14. **SearchBar.tsx** - –ü–æ–∏—Å–∫
15. **StickerPicker.tsx** - –í—ã–±–æ—Ä —Å—Ç–∏–∫–µ—Ä–æ–≤
16. **ThemeToggle.tsx** - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
17. **TypingIndicator.tsx** - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
18. **UserSettings.tsx** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
19. **VoiceRecorder.tsx** - –ó–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üîå Backend API

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (14 —à—Ç):

1. **authController.ts** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
2. **userController.ts** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. **chatController.ts** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
4. **messageController.ts** - –°–æ–æ–±—â–µ–Ω–∏—è
5. **chatSettingsController.ts** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤
6. **folderController.ts** - –ü–∞–ø–∫–∏
7. **stickerController.ts** - –°—Ç–∏–∫–µ—Ä—ã
8. **botController.ts** - –ë–æ—Ç—ã
9. **webhookController.ts** - –í–µ–±—Ö—É–∫–∏
10. **n8nController.ts** - n8n –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
11. **blockController.ts** - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞
12. **reactionController.ts** - –†–µ–∞–∫—Ü–∏–∏
13. **pinnedMessageController.ts** - –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ
14. **searchController.ts** - –ü–æ–∏—Å–∫

### –†–æ—É—Ç—ã (15 —à—Ç):

1. **authRoutes.ts**
2. **userRoutes.ts**
3. **chatRoutes.ts**
4. **messageRoutes.ts**
5. **chatSettings.ts**
6. **folder.ts**
7. **sticker.ts**
8. **bot.ts**
9. **webhook.ts**
10. **n8n.ts**
11. **block.ts**
12. **reactionRoutes.ts**
13. **pinnedMessage.ts**
14. **search.ts**
15. **index.ts** (–≥–ª–∞–≤–Ω—ã–π)

---

## üöÄ WebSocket —Å–æ–±—ã—Ç–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

**–°–æ–æ–±—â–µ–Ω–∏—è:**
- `message:send` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `message:new` - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `message:edit` - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `message:delete` - –£–¥–∞–ª–µ–Ω–∏–µ
- `message:typing` - –°—Ç–∞—Ç—É—Å –ø–µ—á–∞—Ç–∏

**–ß–∞—Ç—ã:**
- `chat:join` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —á–∞—Ç—É
- `chat:leave` - –í—ã—Ö–æ–¥ –∏–∑ —á–∞—Ç–∞
- `chat:updated` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞

**–ó–≤–æ–Ω–∫–∏:**
- `call:initiate` - –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫
- `call:answer` - –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∑–≤–æ–Ω–æ–∫
- `call:end` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
- `call:incoming` - –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
- `call:toggle-recording` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—å—é
- `call:recording-status` - –°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- `user:status` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `user:typing` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç
- `user:online` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–Ω–ª–∞–π–Ω
- `user:offline` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ–ª–∞–π–Ω

**–†–µ–∞–∫—Ü–∏–∏:**
- `reaction:add` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–∏
- `reaction:remove` - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–∏

### –§–∞–π–ª:
`/server/src/socket/index.ts`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

1. **README.md** - –ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (RU) ‚úÖ
2. **–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (RU) ‚úÖ
3. **–°–¢–ê–¢–£–°_–†–ï–ê–õ–ò–ó–ê–¶–ò–ò.md** - –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç (RU) ‚úÖ
4. **QUICKSTART.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç ‚úÖ
5. **DEPLOYMENT.md** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é ‚úÖ
6. **USER_GUIDE.md** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚úÖ
7. **CONTRIBUTING.md** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—á–∞—Å—Ç–∏—é ‚úÖ
8. **SECURITY.md** - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚úÖ
9. **CHANGELOG.md** - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚úÖ
10. **FEATURES.md** - –°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π ‚úÖ

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **E2E –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–µ–∫—Ä–µ—Ç–Ω—ã–µ —á–∞—Ç—ã –∏–º–µ—é—Ç —Ñ–ª–∞–≥, –Ω–æ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
   - –¢—Ä–µ–±—É–µ—Ç: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π, –æ–±–º–µ–Ω –∫–ª—é—á–∞–º–∏, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—å—é –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤

3. **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–æ–≤**
   - Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
   - Callback –∑–∞–ø—Ä–æ—Å—ã
   - Inline —Ä–µ–∂–∏–º —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ–∏—Å–∫–∞

4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –±–æ—Ç–æ–≤
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - Telegram Bot API —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

6. **UI/UX —É–ª—É—á—à–µ–Ω–∏—è**
   - –ë–æ–ª—å—à–µ —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
   - –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
   - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤

7. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
   - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis

8. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - 2FA –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
   - IP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
   - –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- ‚úÖ Node.js 18+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- ‚úÖ Redis —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ (`npx prisma migrate dev`)
- ‚úÖ Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (`npx prisma generate`)
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm run install:all`)

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω (Docker)
docker-compose up -d --build

# –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
cd server && npx prisma migrate dev

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
cd server && npx prisma generate

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î
cd server && npx prisma studio
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Stogram** - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–µ–∫–æ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º.

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- ‚úÖ 100% —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ 18 –º–æ–¥–µ–ª–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ 14 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ 15 —Ä–æ—É—Ç–æ–≤
- ‚úÖ 19 React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket
- ‚úÖ Bot API –∏ –≤–µ–±—Ö—É–∫–∏
- ‚úÖ n8n –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ PWA –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### –ì–æ—Ç–æ–≤–æ –∫:
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ Docker
- ‚úÖ –ü—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏—é –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2024  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é ‚úÖ
